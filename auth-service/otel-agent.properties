# OpenTelemetry Agent Configuration cho Auth Service
# Tắt tất cả export để tránh lỗi kết nối
otel.service.name=auth-service
otel.resource.attributes=service.name=auth-service,service.version=1.0.0
otel.traces.exporter=none
otel.metrics.exporter=none
otel.logs.exporter=none

# Tắt hoàn toàn OTLP exporter
otel.exporter.otlp.traces.endpoint=
otel.exporter.otlp.metrics.endpoint=
otel.exporter.otlp.logs.endpoint=

# Cấu hình sampling (chỉ để debug)
otel.traces.sampler=always_on

# Tắt các instrumentation không cần thiết để tăng performance
otel.instrumentation.runtime-telemetry-java8.enabled=false
otel.instrumentation.runtime-telemetry-java11.enabled=false
otel.instrumentation.runtime-telemetry-java17.enabled=false

# Tắt hoàn toàn Log4j1 và Logback MDC
otel.instrumentation.log4j-mdc.enabled=false
otel.instrumentation.logback-mdc.enabled=false

# Bật tất cả Log4j2 instrumentation (version 1.32.0 tự detect)
otel.instrumentation.log4j-appender.enabled=true
otel.instrumentation.log4j-context-data.enabled=true

# Bật servlet instrumentation cho Tomcat
otel.instrumentation.servlet.enabled=true
otel.instrumentation.tomcat.enabled=true

# Chỉ show log quan trọng của agent
otel.javaagent.logging=application

# Tắt debug logging cho production
otel.javaagent.debug=false

# Cấu hình MDC keys cho Log4j2
otel.instrumentation.common.mdc-attributes=traceId,spanId,serviceName

# Đảm bảo context propagation hoạt động
otel.propagators=tracecontext,baggage,b3
